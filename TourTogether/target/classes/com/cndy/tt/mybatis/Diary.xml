<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cndy.tt.mybatis.Diary">
	
	<resultMap id="diaryResult" type="Diary">
        <result property="diary_no" column="DIARY_NO"/>
        <result property="email" column="EMAIL"/>
        <result property="title" column="TITLE"/>
        <result property="region" column="REGION"/>
        <result property="start_date" column="START_DATE"/>
        <result property="end_date" column="END_DATE"/>
        <result property="diary_content" column="DIARY_CONTENT"/>
        <result property="company" column="COMPANY"/>
        <result property="write_date" column="WRITE_DATE"/>
        <result property="count_read" column="COUNT_READ"/>
        <result property="user_like" column="USER_LIKE"/>
	</resultMap>
	
	<select id="diarySelectAll" resultType="Diary">
       select * from TOUR_DIARY order by DIARY_NO desc
    </select>
    
    <select id="diaryContent" resultType="Diary" parameterType="long">
    	select * from TOUR_DIARY where DIARY_NO=#{diary_no}
    </select>
	
	<insert id="diaryInsert" parameterType="Diary">
		insert into TOUR_DIARY values
			( TOUR_DIARY_SEQ.nextval, #{email}, #{title}, 
		   	#{region}, SYSDATE, SYSDATE, #{diary_content}, #{company}, 
		   	SYSDATE, #{count_read, jdbcType=INTEGER}, #{user_like, jdbcType=INTEGER})
	</insert>
	
	<update id="diaryCountRead" parameterType="long">
		update TOUR_DIARY set COUNT_READ = COUNT_READ +1 where DIARY_NO=#{diary_no}
	</update>
	
	<update id="diaryEdit" parameterType="Diary">
		update TOUR_DIARY set TITLE=#{title}, EMAIL=#{email}, REGION=#{region}, 
			COMPANY=#{company}, DIARY_CONTENT=#{diary_content} where DIARY_NO=#{diary_no}
	</update>
	
	<delete id="diaryDelete" parameterType="long">
	   delete from TOUR_DIARY where DIARY_NO = #{diary_no}
	</delete>	 	
</mapper>